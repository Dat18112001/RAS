@model HakunaMatata.Models.ViewModels.VM_RealEstateDetails;

@section scripts{
@*    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=MY_API_KEY&callback=initMap">
    </script>*@
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBQTQKStMp1WkVFGKfHGuDMicYBpJy2UQE&libraries=places&language=vi&callback=initMap" async defer></script>
}

@{
    ViewData["Title"] = "Thông tin chi tiết";

    var realEstateType = Model.RealEstateTypeId switch
    {
        1 => "PHÒNG TRỌ",
        2 => "NHÀ NGUYÊN CĂN",
        3 => "CĂN HỘ",
        4 => "Ở GHÉP",
        _ => "PHÒNG TRỌ"
    };

    var statusCss = Model.Status.Equals("Còn phòng") ? "text-success" : "text-disable";
    var statusIcon = Model.Status.Equals("Còn phòng") ? "fa fa-check" : "fa fa-times";
}

<!-- breadcrumb area start -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<div class="breadcrumb-area jarallax" style="background-image: url(../assets/img/banner/4.jpg);">
    <div class="container" style="background-image:url(/assets/img/bg/4.png)">
        <div class="row info-room">
            <div class="col-6">
                <div id="hero-carousel" class="carousel slide">
                    <div class="carousel-inner">
                        width        <div class="carousel-item active c-item">
                            @foreach (var imageUrl in Model.ImageUrls)
                            {
                                <img src="@imageUrl" class="d-block w-100 c-img" alt="hinh2">
                            }

                        </div>
                        <div class="carousel-item c-item">
                            <img src="/assets/img/avatar.jpg" class="d-block w-100 c-img" alt="hinh3">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#hero-carousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#hero-carousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
            <div class="col-6 info-item" style="color: wheat">
                <h2 class="address-item">51 Ashbumer Street, Higgins</h2>
                <h3 class="code-item">AST 2615</h3>
                <h2 class="current-item">$680 per week</h2>
                <p class="container-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
                <div class="col-xl-4 col-lg-6 col-md-6 btn-container">
                    <form action="add-to-wishlist" method="post">
                        <input type="hidden" name="id" value="@Model.Id" />

                        <div class="col-xl-4 col-lg-6 col-md-6 btn-container">
                            <input class="btn btn-buy" type="submit" value="ADD TO WISHLIST" />
                        </div>
                    </form>


                </div>
            </div>
        </div>
    </div>
</div>

<!-- breadcrumb area End -->
<!-- property-details-area start -->

<div class="property-details-area">
    <div class="container">
        <div class="col-lg-12">
            <div class="breadcrumb-inner">
                <h1 class="page-title">Thông tin chi tiết</h1>
            </div>
        </div>
        <div class="row pd-top-40">
            <div class="col-lg-9 frame-property">
                <div class="property-info mb-5 ">
                    <div class="h4 text-danger">
                        @Model.Title
                    </div>
                    <div class="h6 font-italic">@realEstateType</div>
                </div>
                <div class="property-news-single-card border-bottom-yellow mb-4 pb-2">
                    <div class="row">
                        <div class="col-md-6 col-sm-6">
                            <div class="single-property-info">
                                <div class="h5">Tình trạng</div>
                                <p class="@statusCss font-weight-bold" style="color:black"><i class="@statusIcon"></i>@Model.Status</p>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                            <div class="single-property-info">
                                <div class="h5">Số phòng</div>
                                <p style="color:black"><i class="fa fa-home"></i>@Model.RoomNumber phòng</p>
                            </div>
                        </div>

                        <div class="col-md-6 col-sm-6">
                            <div class="single-property-info">
                                <div class="h5">Giá phòng</div>
                                <p class="text-danger">
                                    <i class="fa fa-usd"></i>
                                    @Helper.VNCurrencyFormat(Model.Price.ToString())/tháng
                                </p>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                            <div class="single-property-info">
                                <div class="h5">Diện tích</div>
                                <p class="text-danger">
                                    @Model.Acreage m<sub style="vertical-align:super">2</sub>
                                </p>
                            </div>
                        </div>

                    </div>
                    <div class="row mt-2">
                        <div class="col-md-6 col-sm-6">
                            <div class="single-property-info">
                                <div class="h5">Ngày bắt đầu</div>
                                <p style="color:black"><i class="fa fa-calendar"></i>@Model.BeginTime</p>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                            <div class="single-property-info">
                                <div class="h5">Ngày hết hạn</div>
                                <p style="color:black"><i class="fa fa-calendar-times-o"></i>@Model.ExprireTime</p>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                            <div class="single-property-info">
                                <div class="h5">SĐT liên hệ</div>
                                <p style="color:black"><i class="fa fa-phone"></i>@Model.ContactNumber</p>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                            <div class="single-property-info">
                                <div class="h5">Người đăng</div>
                                <p style="color:black"><i class="fa fa-user"></i>@Model.AgentName</p>
                            </div>
                        </div>

                    </div>
                    <div class="row mt-2">
                        <div class="col-md-12">
                            <div class="single-property-info">
                                <div class="h5">Địa chỉ</div>
                                <p style="color:black">
                                    @Model.Address
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                @*<div class="@isExpired" id="da-het-han"></div>*@

                <div class="property-news-single-card border-bottom-yellow">
                    <div class="content-title h4">Mô tả chi tiết</div>
                    <div class="mb-3" style="color: black;background-color: #924B03;">
                        <p style="color: black !important;">@Html.Raw(Model.Description)</p>
                    </div>



                </div>
                <div class="property-news-single-card border-bottom-yellow pb-4">
                    <div class="content-title mb-3 h4">Tiện ích có sẵn</div>
                    <div class="row">
                        @if (Model.SecurityCamera)
                        {
                            <div class="col-sm-6">
                                <ul class="rld-list-style mb-3">
                                    <li><i class="fa fa-check"></i> Camera an ninh</li>
                                </ul>
                            </div>
                        }
                        @if (Model.HasPrivateWc)
                        {
                            <div class="col-sm-6">
                                <ul class="rld-list-style mb-3">

                                    <li><i class="fa fa-check"></i> Vệ sinh riêng</li>

                                </ul>
                            </div>
                        }

                        @if (Model.HasMezzanine)
                        {
                            <div class="col-sm-6">
                                <ul class="rld-list-style mb-3">

                                    <li><i class="fa fa-check"></i> Có gác lửng</li>

                                </ul>
                            </div>
                        }

                        @if (Model.AllowCook)
                        {
                            <div class="col-sm-6">
                                <ul class="rld-list-style mb-3">

                                    <li><i class="fa fa-check"></i> Cho phép nấu ăn</li>

                                </ul>
                            </div>
                        }

                        @if (Model.FreeTime)
                        {
                            <div class="col-sm-6">
                                <ul class="rld-list-style mb-3">

                                    <li><i class="fa fa-check"></i> Giờ giấc tự do</li>

                                </ul>
                            </div>
                        }
                        @if (Model.WifiPrice == 0)
                        {
                            <div class="col-sm-6">
                                <ul class="rld-list-style mb-3">
                                    <li><i class="fa fa-check"></i> Free wifi</li>
                                </ul>
                            </div>
                        }

                    </div>
                </div>

                <div class="property-news-single-card style-two border-bottom-yellow">
                    <div class="content-title mb-3 h4">Hình ảnh</div>
                    @if (Model.ImageUrls.Count > 0)
                    {
                        <div id="picturesCarousel" class="carousel slide" data-ride="carousel">

                            <ol class="carousel-indicators">
                                <li data-target="#picturesCarousel" data-slide-to="0" class="active"></li>
                                @for (var i = 1; i < Model.ImageUrls.Count; i++)
                                {
                                    <li data-target="#picturesCarousel" data-slide-to="@i"></li>
                                }
                            </ol>

                            <div class="carousel-inner" style="height: 500px;">
                                <div class="carousel-item active" style="height: 100%;">
                                    <img class="d-block  mx-auto h-100" src="@Model.ImageUrls.First()" alt="">
                                </div>
                                @for (var i = 1; i < Model.ImageUrls.Count; i++)
                                {
                                    <div class="carousel-item" style="height: 100%;">
                                        <img class="d-block mx-auto h-100" src="@Model.ImageUrls[i]" alt="">
                                    </div>
                                }
                            </div>

                            <a class="carousel-control-prev" href="#picturesCarousel" role="button"
                               data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#picturesCarousel" role="button"
                               data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    }
                    else
                    {
                        <div>Hiện chưa có hình ảnh nào.</div>
                    }

                </div>
                <div class="property-news-single-card style-two">
                    <div class="content-title mb-3 h4">Bản đồ</div>
                    <p style="color: black" class="font-italic">(Vị trí trên bản đồ chỉ mang tính chất tương đối, chưa phải vị trí chính xác)</p>
                    <input type="hidden" id="lat" value="@Model.Latitude" />
                    <input type="hidden" id="longt" value="@Model.Longtitude" />
                    <div id="map" style="height: 500px; border-radius:8px"></div>
                </div>


            </div>
            <div class="col-lg-3">
                <div class="agent-user">
                    <div class="agent-avatar">
                        <img class="img-avatar" src="./assets/img/avatar.jpg" />
                    </div>
                    <h2 class="agent-name">@Model.AgentName</h2>
                    <h4 class="agent-nick-name">nick name</h4>
                    <div class="btn-container">
                        <div class="btn btn-contact">
                                @Model.ContactNumber
                        </div>
                    </div>
                    <div class="btn-container">
                        <a href="#form-email-agent">
                            <div class="btn btn-contact">
                                EMAIL
                            </div>
                        </a>
                    </div>
                    <ul class="social-icon">
                        <li>
                            <a href="#" target="_blank">
                                <i class="fa fa-facebook  "></i>
                            </a>
                        </li>
                        <li>
                            <a href="#" target="_blank">
                                <i class="fa fa-twitter  "></i>
                            </a>
                        </li>
                        <li>
                            <a href="#" target="_blank">
                                <i class="fa fa-linkedin"></i>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="widget mt-3 pl-3">
                    <div class="text-danger h6 pt-3">Xem theo loại phòng</div>
                    <ul class="ml-2">

                        @foreach (var item in ViewBag.type)
                        {
                            var b = item.Id;
                            <li><a asp-action="Index" asp-route-type="@b">@item.RealEstateTypeName</a> </li>
                        }

                    </ul>
                </div>
                <div class="widget mt-3 pl-3">
                    <div class="text-danger h6 pt-3">Xem theo quận/huyện</div>
                    <ul class="ml-2">
                        @foreach (var item in ViewBag.city){
                            var b = item.Id;
                            <li><a asp-action="Index" asp-route-city="@b">@item.CityName</a> </li>
                        }
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- property details area end -->
<!-- email agent start -->
<div id="form-email-agent">
    <div class="container">
        <div class="row email-contact">
            <div class="col-5 profile-agent">
                <p>chua design</p>
            </div>
            <div class="col-7 contact-agent">
                <h3 class="agent-tilte">Please send me information on 51 Clancy McKenna Crescent, Bonner ACT007</h3>
                <div class="row menu-check">
                    <div class="col-6">
                        <input type="checkbox" id="check-1">
                        <label for="check-1"> Inspection times</label><br>
                        <input type="checkbox" id="check-2">
                        <label for="check-2"> Availability</label><br>
                    </div>
                    <div class="col-6">
                        <input type="checkbox" id="check-3">
                        <label for="check-3"> Lease tern</label><br>
                        <input type="checkbox" id="check-4">
                        <label for="check-4"> Other</label><br>
                    </div>
                </div>
                <div class="row input-text-main">
                    <div class="col-6 input-with-icon">
                        <input type="text" id="input-text-name" class="input-text" placeholder="&#xf2c0; Full Name">
                        <br>
                        <input type="text" id="input-text-phone" class="input-text" placeholder="&#xf095; Phone Numer">
                        <br>
                    </div>
                    <div class="col-6">
                        <input type="text" id="input-text-email" class="input-text" placeholder="&#xf003; Email">
                        <br>
                        <input type="text" id="input-text-post" class="input-text" placeholder="&#xf041; Postcode" />
                        <br>
                    </div>
                </div>
                <input type="checkbox" id="check-send">
                <label for="check-send"> Send me a copy of the enquiry</label><br />
                <div class="btn btn-send-enquiry">
                    SEND ENQUIRY
                </div>
                <p class="">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>

            </div>

        </div>
    </div>
</div>
<!-- email agent end -->

<style>
    .info-room {
        border: 1px solid #000;
    }

    .c-item {
        height: 480px;
    }

    .c-img {
        height: 100%;
        object-fit: cover;
    }

    .carousel.slide {
        width: 480px;
    }

    .address-item {
        padding-top: 40px;
    }

    .info-item {
        z-index: 10;
    }

    .btn-buy,
    .btn-buy:hover {
        border: 1px solid #000;
        background-color: rgb(245 121 121);
    }

    .page-title {
        padding-top: 40px;
    }

    .agent-user {
        height: auto;
        border: 1px solid #000;
        text-align: center;
        padding: 12px 0;
    }

    .agent-nick-name {
        margin-bottom: 48px;
    }

    .agent-avatar {
        width: 60px;
        height: 60px;
        border-radius: 100px;
        margin: 12px auto;
    }

    .img-avatar {
        border-radius: 100px;
        border: 1px solid #000;
        align-items: center;
    }

    .btn-contact,
    .btn-contact:hover {
        background-color: #0000;
        border: 1px solid #000;
    }

    .btn-sign,
    .btn-sign:hover {
        background-color: #b99796;
    }

    .btn-contact,
    .btn-sign {
        border: 1px solid #000;
        width: 100%;
        line-height: 32px;
    }

    .btn-container {
        padding: 0 16px;
        margin-bottom: 12px;
    }

    .social-icon {
        justify-content: space-between;
        margin-left: -16px;
    }

    .frame-property,
    .email-contact {
        border: 1px solid black;
    }

    .img-property-item {
        margin: 16px 0;
        padding-bottom: 32px;
    }

    .contact-agent {
        background-color: #e8eaed;
        padding: 0 24px;
    }

    .btn-send-enquiry,
    .btn-send-enquiry:hover {
        background-color: var(--main-color-one);
        width: 100%;
        line-height: 32px;
        margin: 16px 0;
    }

    .agent-tilte {
        font-size: 24px;
        margin-top: 24px
    }

    #form-email-agent {
        margin-top: 16px;
    }

    .menu-check,
    .input-text,
    .check-send {
        margin-bottom: 16px;
    }

    #input-text-name,
    #input-text-phone,
    #input-text-email,
    #input-text-post {
        width: 100%;
        height: 34px;
    }

    .input-text {
        font-family: 'FontAwesome';
        padding-left: 12px;
    }

</style>
<!-- Recommended area start -->
<div class="recommended-area pd-top-90 pd-bottom-70">
    <div class="container">
        <div class="section-title">
            <h3 class="title">Bài đăng liên quan</h3>
            <a class="btn-view-all" asp-action="Index">Xem tất cả</a>
        </div>
        @await Html.PartialAsync("_recommendList", Model.RecommmendList)
    </div>
</div>
<!-- Recommended area end -->

@*<script>
    // Initialize and add the map
    function initialize() {
        // The location of real esate
        var latitude = document.getElementById('lat').value;
        var longtitude = document.getElementById('longt').value;
        console.log("TEST")
        var loca = { lat: Number(latitude), lng: Number(longtitude) };
        // The map, centered at real estate
        var map = new google.maps.Map(
            document.getElementById('map'), { zoom: 17, center: loca });
        // The marker
        var marker = new google.maps.Marker({ position: loca, map: map });
    }
</script>*@
<script>
    function initMap() {
        var latitude = parseFloat(document.getElementById('lat').value);
        var longitude = parseFloat(document.getElementById('longt').value);
        var location = { lat: latitude, lng: longitude };

        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 17,
            center: location
        });

        var marker = new google.maps.Marker({
            position: location,
            map: map
        });
    }
</script>